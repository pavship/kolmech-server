# import User from "./generated/prisma.graphql"

type Query {
  me: User
  enquiries: [Enquiry!]!
  enquiry (id: ID!): Enquiry
  order (id: ID!): Order
  orgs: [Org!]!
  depts: [Dept!]!
  statuses: [Status!]!
  models: [Model!]!
  modelProds(modelId: ID!): [Prod!]!
  deptProds(deptId: ID!): [Prod!]!
}

type Mutation {
  signup(email: String!, password: String!, fName: String!, lName: String): AuthPayload!
  login(email: String!, password: String!): AuthPayload!
  createEnquiry(dateLocal: String!, orgId: ID!, modelId: ID!, qty: Int!): Enquiry
  updateEnquiry(input: EnquiryInput!): Enquiry
  deleteAllEnquiries: BatchPayload!
  createEnquiryEvent(enquiryId: ID!, htmlText: String, statusId: ID, doc: DocCreateInput): Event
  createOrg(inn: String!): Org
  deleteOrg(id: ID!): Org
  deleteAllOrgs: BatchPayload!
  upsertOrder(id: ID, enquiryId: ID, dateLocal: String!, qty: Int, amount: Float): Order
  reserveProds(orderId: ID!, prodIds: [ID!]!): Order
  upsertProd(input: ProdInput!): Prod
  moveProds(to: ID!, prodIds: [ID!]!): MoveProdPayload!
  importModels: BatchPayload!
  seedEnquiryStatuses: BatchPayload!
}

type Subscription {
  enquirySubscription: EnquirySubscriptionPayload!
}

type AuthPayload {
  token: String!
}

type MoveProdPayload {
  prods: [Prod!]!
  to: ID!
}

input EnquiryInput {
  id: ID!
  dateLocal: String
  orgId: ID
  modelId: ID
  qty: Int
  htmlNote: String
}

input ProdInput {
  id: ID
  fullnumber: String
  hasDefect: Boolean
  isSpoiled: Boolean
  melt: Int
  meltShift: Int
  htmlNote: String
  number: Int
  progress: Float
  year: Int
  deptId: ID
  modelId: ID
}